========================================
ðŸš€ ÐšÐžÐœÐÐÐ”Ð« Ð”Ð›Ð¯ ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð¡Ð•Ð Ð’Ð•Ð Ð
========================================

Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¿Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ:

----------------------------------------
Ð¨ÐÐ“ 1: ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
----------------------------------------

ssh root@217.26.27.210

ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: rvy&YekUkBs6


----------------------------------------
Ð¨ÐÐ“ 2: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ‚ ÑÐºÑ€Ð¸Ð¿Ñ‚
----------------------------------------

Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð’Ð¡Ð Ð¾Ñ‚ "cat" Ð´Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ "EOF" Ð¸ Ð²ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð² Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»:

cat > setup.sh << 'SETUP_EOF'
#!/bin/bash
set -e

echo "=========================================="
echo "ðŸš€ AI Voice Bot - Server Setup"
echo "=========================================="

# Update
echo "ðŸ“¦ [1/8] Updating system..."
apt update && apt upgrade -y

# Docker
echo "ðŸ³ [2/8] Installing Docker..."
curl -fsSL https://get.docker.com | sh

# Docker Compose
echo "ðŸ“¦ [3/8] Installing Docker Compose..."
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# Nginx
echo "ðŸŒ [4/8] Installing Nginx..."
apt install -y nginx git ufw certbot python3-certbot-nginx

# Configure Nginx
echo "âš™ï¸  [5/8] Configuring Nginx..."
cat > /etc/nginx/sites-available/voice.matrixcontrol.ru << 'NGINX_CONFIG'
server {
    listen 80;
    server_name voice.matrixcontrol.ru;
    location /.well-known/acme-challenge/ { root /var/www/html; }
    location / { return 301 https://$server_name$request_uri; }
}
server {
    listen 443 ssl http2;
    server_name voice.matrixcontrol.ru;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    location /api/ {
        proxy_pass http://localhost:8000/api/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_connect_timeout 60s;
        proxy_read_timeout 60s;
    }
}
NGINX_CONFIG

ln -sf /etc/nginx/sites-available/voice.matrixcontrol.ru /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t && systemctl restart nginx

# SSL
echo "ðŸ” [6/8] Setting up SSL..."
certbot --nginx -d voice.matrixcontrol.ru --non-interactive --agree-tos --email admin@matrixcontrol.ru --redirect

# Firewall
echo "ðŸ”’ [7/8] Configuring firewall..."
ufw --force reset
ufw default deny incoming
ufw default allow outgoing
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw --force enable

# Project
echo "ðŸ“‚ [8/8] Setting up project..."
cd /root
git clone https://github.com/Vovanwotkd/ai-voice.git || (cd ai-voice && git pull)
cd ai-voice

# Create .env
DB_PASSWORD=$(openssl rand -hex 16)
SECRET_KEY=$(openssl rand -hex 32)
cat > .env << 'ENV_CONFIG'
DB_USER=postgres
DB_PASSWORD=${DB_PASSWORD}
DATABASE_URL=postgresql://postgres:${DB_PASSWORD}@postgres:5432/hostess_db
REDIS_URL=redis://redis:6379/0
LLM_PROVIDER=claude
ANTHROPIC_API_KEY=sk-ant-api03-REPLACE-WITH-YOUR-REAL-KEY
RESTAURANT_NAME=Ð“Ð°ÑÑ‚Ñ€Ð¾Ð½Ð¾Ð¼Ð¸Ñ
RESTAURANT_PHONE=+7-495-123-45-67
RESTAURANT_ADDRESS=ÐœÐ¾ÑÐºÐ²Ð°, ÑƒÐ». ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð°Ñ, Ð´. 1
SECRET_KEY=${SECRET_KEY}
DEBUG=false
CORS_ORIGINS=https://voice.matrixcontrol.ru
VITE_API_URL=https://voice.matrixcontrol.ru
ENV_CONFIG
chmod 600 .env

echo ""
echo "=========================================="
echo "âœ… Setup complete!"
echo "=========================================="
echo ""
echo "Next steps:"
echo "1. Add your API key: nano /root/ai-voice/.env"
echo "2. Start app: cd /root/ai-voice && docker-compose up -d --build"
echo ""
echo "Your site: https://voice.matrixcontrol.ru"
SETUP_EOF

chmod +x setup.sh
./setup.sh


----------------------------------------
Ð¨ÐÐ“ 3: ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ API ÐºÐ»ÑŽÑ‡
----------------------------------------

nano /root/ai-voice/.env

ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ:
ANTHROPIC_API_KEY=sk-ant-api03-REPLACE-WITH-YOUR-REAL-KEY

Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡.

Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ: Ctrl+X, Y, Enter


----------------------------------------
Ð¨ÐÐ“ 4: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
----------------------------------------

cd /root/ai-voice
docker-compose up -d --build


----------------------------------------
Ð¨ÐÐ“ 5: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚
----------------------------------------

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ:
https://voice.matrixcontrol.ru

========================================
ðŸŽ‰ Ð“ÐžÐ¢ÐžÐ’Ðž!
========================================

ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹:

# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs -f

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker-compose restart

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
docker-compose ps

# Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ API
curl http://localhost:8000/api/health
